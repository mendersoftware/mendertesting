This directory has been created to contain common CI templates
shared across multiple CI jobs in multiple repos.

Those templates can be self contained or use helper scripts located
in the `utils` directory.

## retry-default-common.yml

Provides the `.retry-default-common` hidden job: a baseline `retry:`
policy covering transient runner failures and network-related exit codes.
Intended to be used via `extends:` in any job, optionally combined with
the network check anchors below.

**Usage in an upstream pipeline:**

```yaml
include:
  - project: Northern.tech/Mender/mendertesting
    file: qa-common/retry-default-common.yml

my-job:
  extends: .retry-default-common
  script:
    - go build ./...
```

Combined with a network check:

```yaml
include:
  - project: Northern.tech/Mender/mendertesting
    file: qa-common/retry-default-common.yml
  - project: Northern.tech/Mender/mendertesting
    file: qa-common/retry-network-go-common.yml

my-job:
  extends: .retry-default-common
  before_script:
    - !reference [.requires-network-go-common, before_script]
  script:
    - go build ./...
```

## retry-network-go-common.yml

Provides the `.requires-network-go-common` anchor: a before_script
snippet that verifies Go network access is available. It retries up
to 4 times before exiting with code 192 (network unavailable), which
can then be used to trigger a GitLab job retry.

**Usage in an upstream pipeline:**

```yaml
include:
  - project: Northern.tech/Mender/mendertesting
    file: qa-common/retry-network-go-common.yml

my-job:
  image: golang:1.24
  before_script:
    - !reference [.requires-network-go-common, before_script]
  retry:
    max: 2
    exit_codes:
      - 192
    when:
      - runner_system_failure
      - stuck_or_timeout_failure
  script:
    - go build ./...
```

## retry-network-apt-common.yml

Provides the `.requires-network-apt-common` anchor: a before_script
snippet that verifies apt network access is available by running
`apt-get update`. Retries up to 4 times before exiting with code 192
(network unavailable), which can then be used to trigger a GitLab job retry.

**Usage in an upstream pipeline:**

```yaml
include:
  - project: Northern.tech/Mender/mendertesting
    file: qa-common/retry-network-apt-common.yml

my-job:
  before_script:
    - !reference [.requires-network-apt-common, before_script]
    - apt-get install --assume-yes my-package
  retry:
    max: 2
    exit_codes:
      - 192
    when:
      - runner_system_failure
      - stuck_or_timeout_failure
  script:
    - my-package --do-thing
```
